# 前后端部署说明（Rust 服务直接托管前端）

## 前提
- 已安装 Node.js / npm
- 已安装 Rust (cargo)

## 一次性安装依赖
```bash
cd client
npm install
```

## 构建前端
每次前端改动后，需要重新构建：
```bash
cd client
npm run build
```
构建产物位于 `client/dist/`。

## 启动服务
在项目根目录运行（会启动 SQL 端口 4455 和 Web 端口 4456）：
```bash
cargo run -- web   # 只启动 Web 静态文件服务
# 或
cargo run          # 默认 daemon，同步启动 SQL 与 Web，两端守护
```

启动后访问：http://127.0.0.1:4456

## 目录与路由
- Rust Web 服务通过 `actix-files` 读取 `client/dist`，并提供 SPA 兜底路由（刷新仍返回 index.html）。
- 前端默认的 WebSocket 地址保持 `ws://127.0.0.1:4455/ws`（无需 Vite dev server）。

## 常见问题
- **404 或空白页**：确认已经执行 `npm run build` 且 `client/dist` 存在。
- **端口冲突**：检查 4455/4456 是否被占用，或在 `src/config.rs` 中调整端口后重新编译运行。
